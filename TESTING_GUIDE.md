# ShortShare 테스트 가이드

## 🚀 서버 실행

### 1. 백엔드 서버 실행
```bash
cd D:\MyPython\fastapi_short_url
python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

백엔드가 실행되면: **http://localhost:8000**

API 문서 확인: **http://localhost:8000/docs**

### 2. 프론트엔드 서버 실행
```bash
cd D:\MyPython\fastapi_short_url_fe
npm run dev
```

프론트엔드가 실행되면: **http://localhost:3000**

---

## 📋 테스트 시나리오

### 시나리오 1: 회원가입 및 로그인

1. **브라우저에서 http://localhost:3000 접속**
2. **회원가입**
   - 사용자명: `testuser1`
   - 이메일: `test1@example.com`
   - 비밀번호: `password123`
   - "회원가입" 버튼 클릭
3. **자동 로그인 확인**
   - 회원가입 성공 시 자동으로 로그인됨
   - 우측 상단에 사용자명과 "관리자" 배지 표시 (첫 사용자)
4. **로그아웃 후 재로그인 테스트**
   - 우측 상단 사용자 메뉴 → "로그아웃"
   - 로그인 폼에서 동일한 정보로 로그인

**예상 결과:**
- ✅ 회원가입 성공
- ✅ 자동 로그인
- ✅ 첫 사용자는 자동으로 관리자 권한 부여
- ✅ 로그아웃 및 재로그인 정상 작동

---

### 시나리오 2: 파일 업로드

1. **로그인 후 "파일 업로드" 탭 선택**
2. **파일 업로드 방법 1: 드래그 앤 드롭**
   - 컴퓨터에서 파일을 드래그하여 업로드 영역에 드롭
3. **파일 업로드 방법 2: 클릭하여 선택**
   - 업로드 영역 클릭
   - 파일 선택 대화상자에서 파일 선택
4. **"업로드" 버튼 클릭**
5. **업로드 결과 확인**
   - 업로드 완료 메시지
   - 파일명, 크기, 최대 다운로드 횟수 표시
   - 만료 시간: 24시간

**예상 결과:**
- ✅ 드래그 앤 드롭 업로드 정상 작동
- ✅ 파일 선택 업로드 정상 작동
- ✅ 업로드 진행 상태 표시
- ✅ 업로드 완료 정보 표시

---

### 시나리오 3: 파일 다운로드

1. **"파일 다운로드" 탭 선택**
2. **파일 목록 확인**
   - 업로드한 파일들이 카드 형식으로 표시
   - 파일 아이콘, 이름, 크기, 다운로드 횟수 표시
3. **파일 타입 필터링 테스트**
   - 상단의 "이미지", "비디오", "문서" 등 필터 버튼 클릭
   - 선택한 타입의 파일만 표시되는지 확인
4. **개별 파일 다운로드**
   - 파일 카드 하단의 "⬇️ 바로 다운로드" 버튼 클릭
   - 폴더 선택 대화상자에서 저장 위치 선택 (Chrome/Edge)
   - 파일이 선택한 위치에 저장되는지 확인
5. **다중 파일 일괄 다운로드**
   - 파일 카드 클릭하여 여러 파일 선택 (체크박스 표시)
   - 우측 상단 "다운로드 (N)" 버튼 클릭
   - 확인 다이얼로그에서 선택한 파일 목록 확인
   - "다운로드" 버튼 클릭
   - 폴더 선택 대화상자에서 저장 폴더 선택
   - 모든 파일이 선택한 폴더에 저장되는지 확인

**예상 결과:**
- ✅ 파일 목록 정상 표시
- ✅ 파일 타입 필터링 정상 작동
- ✅ 개별 다운로드 정상 작동
- ✅ 다중 선택 및 일괄 다운로드 정상 작동
- ✅ 폴더 선택 기능 정상 작동 (Chrome/Edge)

---

### 시나리오 4: 다운로드 제한 테스트

1. **파일 다운로드 횟수 확인**
   - 파일 카드에서 "다운로드 횟수/최대 다운로드" 표시 확인
   - 예: "1/3" (3회 중 1회 사용)
2. **파일을 여러 번 다운로드하여 제한에 도달**
   - 동일한 파일을 3회 다운로드
   - 3회 다운로드 후 "다운로드 불가" 상태 확인
3. **관리자 기능: 다운로드 제한 재설정 (관리자만)**
   - 파일 카드의 "🔄 제한 재설정" 버튼 클릭
   - 새로운 제한 횟수 입력 (예: 5)
   - 확인 버튼 클릭
   - 다운로드 횟수가 0으로 초기화되고 제한이 5로 변경되는지 확인

**예상 결과:**
- ✅ 다운로드 횟수 정상 카운팅
- ✅ 제한 도달 시 다운로드 비활성화
- ✅ 관리자 제한 재설정 기능 정상 작동

---

### 시나리오 5: 관리자 기능 - 다운로드 로그

1. **"다운로드 로그" 탭 선택 (관리자만 표시)**
2. **다운로드 로그 테이블 확인**
   - 사용자명
   - 파일명
   - 다운로드 시각
   - IP 주소
3. **로그 정렬 확인**
   - 최신 다운로드가 상단에 표시되는지 확인

**예상 결과:**
- ✅ 관리자에게만 "다운로드 로그" 탭 표시
- ✅ 모든 다운로드 이력 조회 가능
- ✅ 사용자, 파일, 시각, IP 정보 정상 표시

---

## 🔍 에러 시나리오 테스트

### 1. 인증 에러
- **테스트**: 로그아웃 상태에서 API 호출
- **예상**: 로그인 화면으로 자동 리다이렉트

### 2. 파일 크기 제한
- **테스트**: 매우 큰 파일 업로드 (>100MB)
- **예상**: 업로드 실패 에러 메시지

### 3. 잘못된 파일 ID
- **테스트**: 존재하지 않는 short_id로 다운로드 시도
- **예상**: "파일을 찾을 수 없습니다" 에러

### 4. 만료된 파일
- **테스트**: 24시간 경과 후 파일 다운로드 시도
- **예상**: "파일이 만료되었습니다" 에러

---

## 🌐 브라우저 호환성 테스트

### Chrome/Edge (권장)
- ✅ File System Access API 지원
- ✅ 폴더 선택하여 다운로드 가능
- ✅ 모든 기능 정상 작동

### Firefox
- ⚠️ File System Access API 미지원
- ✅ 기본 다운로드 방식으로 폴백
- ✅ 브라우저 기본 다운로드 폴더에 저장

### Safari
- ⚠️ File System Access API 미지원
- ✅ 기본 다운로드 방식으로 폴백
- ✅ 브라우저 기본 다운로드 폴더에 저장

---

## 📱 반응형 디자인 테스트

### 데스크톱 (1920x1080)
- 파일 카드: 4열 그리드
- 모든 기능 정상 표시

### 태블릿 (768x1024)
- 파일 카드: 2-3열 그리드
- 내비게이션 조정

### 모바일 (375x667)
- 파일 카드: 1열 그리드
- 터치 최적화 인터페이스

---

## 🔒 보안 테스트

### 1. JWT 토큰 검증
- ✅ 유효하지 않은 토큰으로 API 호출 시 401 에러
- ✅ 만료된 토큰으로 API 호출 시 401 에러

### 2. 권한 검증
- ✅ 일반 사용자가 관리자 API 호출 시 403 에러
- ✅ 비로그인 사용자 접근 시 로그인 화면

### 3. CORS 검증
- ✅ localhost:3000에서 localhost:8000 API 호출 정상
- ✅ 다른 origin에서의 요청 차단

---

## 🎯 성능 테스트

### 파일 업로드 성능
- 작은 파일 (<1MB): 즉시 업로드
- 중간 파일 (1-10MB): <5초
- 큰 파일 (10-100MB): <30초

### 파일 다운로드 성능
- 단일 파일: 즉시 다운로드
- 다중 파일 (5개): <10초

### UI 반응성
- 페이지 로딩: <2초
- 탭 전환: 즉시
- 파일 필터링: 즉시

---

## ✅ 최종 체크리스트

### 기능 테스트
- [ ] 회원가입
- [ ] 로그인
- [ ] 로그아웃
- [ ] 파일 업로드 (드래그 앤 드롭)
- [ ] 파일 업로드 (클릭 선택)
- [ ] 파일 목록 조회
- [ ] 파일 타입 필터링
- [ ] 단일 파일 다운로드
- [ ] 다중 파일 다운로드
- [ ] 다운로드 제한 확인
- [ ] 다운로드 제한 재설정 (관리자)
- [ ] 다운로드 로그 조회 (관리자)

### UI/UX 테스트
- [ ] 반응형 디자인 (모바일/태블릿/데스크톱)
- [ ] 로딩 상태 표시
- [ ] 에러 메시지 표시
- [ ] 성공 메시지 표시
- [ ] 접근성 (키보드 네비게이션)

### 보안 테스트
- [ ] 인증 토큰 검증
- [ ] 권한 검증
- [ ] CORS 설정

### 성능 테스트
- [ ] 파일 업로드 속도
- [ ] 파일 다운로드 속도
- [ ] UI 반응성

---

## 🐛 알려진 이슈 및 제한사항

### File System Access API
- Chrome/Edge에서만 폴더 선택 기능 지원
- Firefox/Safari는 기본 다운로드 방식 사용

### 파일 크기 제한
- 백엔드 설정에 따라 다름 (기본값 확인 필요)

### 세션 관리
- localStorage 사용으로 브라우저 종료 시 로그인 유지
- 다른 브라우저/탭에서는 별도 로그인 필요

---

## 📞 문제 해결

### 백엔드 연결 실패
1. 백엔드 서버가 실행 중인지 확인: `http://localhost:8000/docs`
2. CORS 설정 확인
3. 포트 충돌 확인

### 프론트엔드 로딩 실패
1. npm install 실행 확인
2. 포트 3000 충돌 확인
3. 브라우저 콘솔 에러 확인

### 파일 업로드 실패
1. 백엔드의 uploads 디렉토리 권한 확인
2. 파일 크기 제한 확인
3. 네트워크 탭에서 요청/응답 확인

---

**행운을 빕니다! 🍀**
